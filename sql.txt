-- Create the chatbot_db database
CREATE DATABASE chatbot_db;
USE chatbot_db;

-- Users
CREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) NOT NULL,
    email VARCHAR(255),
    date_joined TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Sessions
CREATE TABLE Sessions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    start_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    end_time TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(id)
);

-- Messages
CREATE TABLE Messages (
    id INT AUTO_INCREMENT PRIMARY KEY,
    session_id INT,
    content TEXT,
    sender ENUM('user', 'bot'),
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (session_id) REFERENCES Sessions(id)
);

-- UserFeedback
CREATE TABLE UserFeedback (
    id INT AUTO_INCREMENT PRIMARY KEY,
    message_id INT,
    rating ENUM('positive', 'neutral', 'negative'),
    comment TEXT,
    FOREIGN KEY (message_id) REFERENCES Messages(id)
);

-- ChatbotModelVersions
CREATE TABLE ChatbotModelVersions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    version_name VARCHAR(255) NOT NULL,
    date_deployed TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);